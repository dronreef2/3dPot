# 3dPot v2.0 - Variáveis de Ambiente
# Copie este arquivo para .env e configure os valores

# =============================================================================
# ENVIRONMENT & DEBUG
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL=postgresql://3dpot:3dpot123@localhost:5432/3dpot_dev
POSTGRES_USER=3dpot
POSTGRES_PASSWORD=3dpot123
POSTGRES_DB=3dpot_dev
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# SECURITY & JWT
# =============================================================================
# IMPORTANTE: Mude esta chave em produção!
# Em produção, use pelo menos 64 caracteres aleatórios
SECRET_KEY=your-super-secret-key-change-in-production-must-be-32-chars-minimum

# JWT Settings
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# =============================================================================
# MFA / 2FA CONFIGURATION (Sprint 9)
# =============================================================================
# Enable/disable Multi-Factor Authentication system-wide
MFA_ENABLED=false

# Issuer name shown in authenticator apps (e.g., Google Authenticator, Authy)
MFA_ISSUER_NAME=3dPot

# Require MFA for admin/superuser accounts
# When true, admins must configure MFA before they can login
MFA_REQUIRED_FOR_ADMIN=false

# =============================================================================
# RATE LIMITING (Sprint 7+8)
# =============================================================================
# Global rate limiting settings
RATE_LIMITING_ENABLED=true

# Sprint 8: Backend selection (in-memory|redis)
# - in-memory: Single-instance rate limiting (default, no Redis required)
# - redis: Distributed rate limiting for multi-instance deployments
RATE_LIMIT_BACKEND=in-memory

# Default limits (requests per minute)
RATE_LIMIT_DEFAULT=60
RATE_LIMIT_BURST=120

# Endpoint-specific limits
RATE_LIMIT_AUTH=10
RATE_LIMIT_API=100
RATE_LIMIT_CLOUD_RENDERING=30
RATE_LIMIT_MARKETPLACE=50

# Legacy settings (deprecated - use above)
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# AUDIT LOGGING (Sprint 7)
# =============================================================================
# Audit logging is automatically enabled
# Logs are written to structured logs with audit=true field
# See docs/arquitetura/SPRINT7-SEGURANCA-RELATORIO.md for details

# =============================================================================
# MINIMAX M2 API
# =============================================================================
# Obtenha sua chave em: https://api.minimax.chat
MINIMAX_API_KEY=your-minimax-api-key-here
MINIMAX_BASE_URL=https://api.minimax.chat/v1
MINIMAX_MODEL=abab6.5s-chat
MINIMAX_MAX_TOKENS=4000
MINIMAX_TEMPERATURE=0.7

# =============================================================================
# EXTERNAL APIs
# =============================================================================
# SLANT3D API
SLANT3D_API_KEY=sl-cc497e90df04027eed2468af328a2d00fa99ca5e3b57893394f6cd6012aba3d4
SLANT3D_BASE_URL=https://api.slant3d.com/v1

# Replicate API
REPLICATE_API_TOKEN=your-replicate-api-token-here
REPLICATE_BASE_URL=https://api.replicate.com/v1

# Octopart API (Componentes Eletrônicos)
OCTOPART_API_KEY=your-octopart-api-key-here
OCTOPART_BASE_URL=https://octopart.com/api/v3

# DigiKey API (Componentes Eletrônicos)
DIGIKEY_API_KEY=your-digikey-api-key-here
DIGIKEY_BASE_URL=https://api.digikey.com

# =============================================================================
# STORAGE (MinIO/S3)
# =============================================================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_SECURE=false

# Buckets
MINIO_BUCKET_MODELS=models
MINIO_BUCKET_RENDERINGS=renderings
MINIO_BUCKET_DOCUMENTS=documents

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=redis123
REDIS_DB=0

# Cache Settings
CACHE_TTL=3600
SESSION_TTL=1800

# =============================================================================
# RABBITMQ
# =============================================================================
RABBITMQ_USER=3dpot
RABBITMQ_PASSWORD=3dpot123
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672

# =============================================================================
# EMAIL (Opcional)
# =============================================================================
# Configure se quiser envio de emails
SMTP_HOST=your-smtp-server.com
SMTP_PORT=587
SMTP_USER=your-email@domain.com
SMTP_PASSWORD=your-email-password
SMTP_TLS=true
EMAIL_FROM=noreply@3dpot.com
EMAIL_FROM_NAME=3dPot System

# =============================================================================
# FILE UPLOADS
# =============================================================================
MAX_FILE_SIZE=104857600
# Formatos aceitos: .stl, .obj, .gltf, .glb, .ply, .3mf, .png, .jpg, .jpeg, .pdf, .txt, .json

# =============================================================================
# 3D MODELING
# =============================================================================
OPENCAD_PATH=/usr/bin/openscad
CADQUERY_WORKERS=4
MODEL_OUTPUT_FORMATS=stl,obj,gltf,3mf

# =============================================================================
# SIMULATION
# =============================================================================
PYBULLET_GUI=false
SIMULATION_TIMEOUT=300
SIMULATION_WORKERS=2

# =============================================================================
# BUDGETING
# =============================================================================
DEFAULT_PRINTER_COST_PER_HOUR=25.0
DEFAULT_MATERIAL_COST_PER_GRAM=0.15

# =============================================================================
# MONITORING & OBSERVABILITY (Sprint 6 & 7)
# =============================================================================
# Observability Settings (Sprint 6)
LOG_LEVEL=INFO
LOG_FORMAT=console
PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# Audit Logging (Sprint 7)
# Logs are automatically captured in structured format
# Filter by {"audit": true} to see only audit logs

# =============================================================================
# MFA/2FA (Sprint 9)
# =============================================================================
# Enable/disable MFA globally (default: false - optional)
MFA_ENABLED=false

# Issuer name shown in authenticator apps
MFA_ISSUER_NAME=3dPot

# Require MFA for admin users (default: false)
MFA_REQUIRED_FOR_ADMIN=false

# =============================================================================
# GRAFANA
# =============================================================================
GRAFANA_ADMIN_PASSWORD=admin123

# =============================================================================
# SERVER
# =============================================================================
HOST=0.0.0.0
PORT=8000
ALLOWED_HOSTS=*

# Frontend URL (para CORS)
FRONTEND_URL=http://localhost:3000