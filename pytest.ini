# Configuração do pytest para o projeto 3dPot
[tool:pytest]
# Diretórios de teste
testpaths = tests

# Padrões de arquivos de teste
python_files = test_*.py *_test.py

# Padrões de classes de teste
python_classes = Test*

# Padrões de funções de teste
python_functions = test_*

# Adiciona o diretório raiz do projeto ao path do Python
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --maxfail=5
    --disable-warnings
    --color=yes
    --durations=10
    --cov=interface-web/server
    --cov=tests/
    --cov-report=term-missing
    --cov-report=html:tests/coverage_html
    --cov-report=xml:tests/coverage.xml
    --cov-fail-under=60
    --junit-xml=tests/pytest-results.xml

# Marcadores personalizados
markers =
    unit: Marca testes unitários
    integration: Marca testes de integração
    e2e: Marca testes end-to-end
    arduino: Marca testes relacionados ao Arduino
    esp32: Marca testes relacionados ao ESP32
    raspberry_pi: Marca testes relacionados ao Raspberry Pi
    3d_models: Marca testes relacionados aos modelos 3D
    hardware: Marca testes de hardware
    slow: Marca testes que demoram para executar
    network: Marca testes que dependem de rede
    docker: Marca testes relacionados ao Docker
    api: Marca testes de API
    web: Marca testes de interface web

# Configurações de warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:pytest_*
    ignore::pytest.PytestUnraisableExceptionWarning

# Configurações de timeout
timeout = 300
timeout_method = thread

# Configurações de cache
cache_dir = .pytest_cache

# Configurações de output
junit_family = xunit2

# Configurações de logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Configurações de paralelização
# Uncomment to enable parallel execution
# addopts = -n auto