# Configuração do Mosquitto MQTT Broker para 3dPot

# Configurações básicas
persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# Logs detalhados para debugging
connection_messages true
log_type all

# Configurações de rede
listener 1883
protocol mqtt

# WebSocket listener para debug
listener 9001
protocol websockets

# Configurações de segurança
allow_anonymous true

# Configurações de performance
max_connections 1000
max_inflight_messages 20
max_queued_messages 1000
message_size_limit 268435456

# Configurações de QoS
message_expiry_interval 0

# Heartbeat
keepalive_interval 60

# Retained messages
retained_persistence true

# Protocol settings
mqtt_version 5

# Bridge connections (se necessário para hardware externo)
# connection bridge-01
# address broker.external.com:1883
# topic # out 0
# topic # in 0

# ACL para tópicos
# user esp32_device
# topic readwrite 3dpot/esp32/#
# topic readwrite 3dpot/sensors/#
# 
# user arduino_device
# topic readwrite 3dpot/arduino/#
# topic readwrite 3dpot/conveyor/#